
# Plan: Partner-Developer Ecosystem Cross-Pollination

## Executive Summary
This plan creates a virtuous cycle between the Partner Program and Developer Platform, where more partners bring businesses, which become valuable data sources for developer apps, which drive more business value, leading to more partner referrals.

## Part 1: Database Schema Enhancements

### 1.1 Technical Partner Tier Table
Create a new table to link developers who also earn revenue from business referrals through their apps:

```sql
CREATE TABLE technical_partners (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  developer_id UUID NOT NULL REFERENCES developer_accounts(id),
  partner_id UUID REFERENCES directory_partners(id),
  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'active', 'suspended')),
  revenue_share_percent NUMERIC(5,2) DEFAULT 5.00,
  total_app_referrals INTEGER DEFAULT 0,
  total_app_earnings NUMERIC(12,2) DEFAULT 0,
  app_name TEXT,
  app_url TEXT,
  approved_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
```

### 1.2 App-Business Attribution Table
Track which businesses were acquired through which developer app:

```sql
CREATE TABLE app_business_attributions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  developer_id UUID NOT NULL REFERENCES developer_accounts(id),
  business_id UUID NOT NULL REFERENCES businesses(id),
  app_name TEXT NOT NULL,
  attribution_source TEXT,
  api_calls_generated INTEGER DEFAULT 0,
  earnings_attributed NUMERIC(12,2) DEFAULT 0,
  first_api_call_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now()
);
```

### 1.3 Partner-Referred Business View for Developers
Expose anonymized partner-referred businesses as API data sources:

```sql
CREATE VIEW partner_referred_businesses_api AS
SELECT 
  b.id,
  b.business_name,
  b.category,
  b.city,
  b.state,
  b.average_rating,
  pr.partner_id,
  dp.directory_name AS referring_directory
FROM businesses b
JOIN partner_referrals pr ON pr.referred_business_id = b.id
JOIN directory_partners dp ON dp.id = pr.partner_id
WHERE pr.is_converted = true
AND b.is_verified = true;
```

---

## Part 2: Developer Showcase Enhancements

### 2.1 Partner-Powered Apps Section
Modify `ShowcaseGalleryPage.tsx` to add a new section featuring apps built on partner-referred business data:

- Add "Partner-Powered" badge for apps using partner-referred businesses
- Show which directories contributed data to each app
- Display cross-ecosystem impact metrics (partner referrals powering developer apps)

### 2.2 Live Business Data Feed
Add a showcase section showing real-time partner-referred businesses available as API data:

- Display count of partner-contributed businesses by category
- Show geographic distribution from partner networks
- Demonstrate the growing data pool developers can access

---

## Part 3: Partner Portal Enhancements

### 3.1 Developer Ecosystem Integration Tab
Add a new tab to `PartnerDashboard.tsx` showing:

- Apps built using businesses the partner referred
- API usage generated by partner-referred businesses
- Additional earnings from Technical Partner tier (if applicable)
- "Become a Technical Partner" CTA for partners who also build apps

### 3.2 Partner-to-Developer Upgrade Path
Create a flow in `PartnerDashboard.tsx` that allows existing partners to:

- Apply for Technical Partner status
- Get API keys with preferential pricing
- Earn rev-share on apps they build using their own referral data

---

## Part 4: Cross-Ecosystem Analytics

### 4.1 Shared Impact Dashboard Component
Create `EcosystemImpactCard.tsx` showing:

- Total businesses in ecosystem (partner-referred)
- Total apps powered by partner data
- Combined CMAL economic impact
- Circular value flow visualization

### 4.2 Admin Unified Revenue Dashboard
Enhance Admin Hub with:

- Combined Partner + Developer revenue view
- Cross-pollination metrics (developers becoming partners, partners becoming developers)
- Ecosystem health indicators

---

## Part 5: Implementation Details

### New Files to Create
1. `src/types/technical-partner.ts` - Type definitions for technical partner tier
2. `src/components/developers/PartnerPoweredShowcase.tsx` - Partner-powered apps section
3. `src/components/developers/LiveBusinessDataFeed.tsx` - Real-time data availability display
4. `src/components/partner/DeveloperEcosystemTab.tsx` - Partner's view of developer impact
5. `src/components/shared/EcosystemImpactCard.tsx` - Cross-ecosystem metrics component
6. `src/hooks/use-technical-partner.ts` - Hook for technical partner operations

### Files to Modify
1. `src/pages/developers/ShowcaseGalleryPage.tsx`
   - Add PartnerPoweredShowcase section
   - Add LiveBusinessDataFeed component
   - Update stats to show partner-contributed data

2. `src/components/partner/PartnerDashboard.tsx`
   - Add new "Developer Impact" or "Ecosystem" tab
   - Show apps using partner-referred businesses
   - Add Technical Partner upgrade CTA

3. `src/pages/developers/DeveloperDashboard.tsx`
   - Add Partner Data Sources section
   - Show which partner networks power their data
   - Add Technical Partner earnings (if applicable)

4. `src/pages/developers/DeveloperLandingPage.tsx`
   - Add section highlighting partner-powered data availability
   - Show ecosystem size and growth

---

## Visual Architecture

```text
+------------------+          +-------------------+
|  PARTNER PORTAL  |          |  DEVELOPER PORTAL |
+------------------+          +-------------------+
        |                              |
        | Refers                       | Builds Apps
        | Businesses                   | Using APIs
        v                              v
+------------------+          +-------------------+
|   BUSINESSES     |  ------> |   API DATA POOL   |
|  (Partner Refs)  |          |  (CMAL, Voice,    |
+------------------+          |   Susu, Fraud)    |
        |                     +-------------------+
        |                              |
        | Generate                     | Powers Apps
        | Value                        | That Drive
        v                              v
+------------------+          +-------------------+
|  PARTNER         |  <------ |  DEVELOPER APPS   |
|  EARNINGS        |          |  (User Adoption)  |
+------------------+          +-------------------+
        |                              |
        +--------------+---------------+
                       |
                       v
              +------------------+
              | TECHNICAL PARTNER|
              | (Hybrid Tier)    |
              | Earns from both  |
              +------------------+
```

---

## Success Metrics
- Partners can see how many developer apps use their referred businesses
- Developers can see which partner networks power their data pool
- Technical Partners earn combined rev-share from both channels
- Showcase gallery features real partner-referred businesses
- Admin dashboard shows unified ecosystem health

---

## Implementation Order
1. Database migrations (tables and views)
2. Type definitions
3. Hooks for data fetching
4. ShowcaseGalleryPage enhancements (Developer side)
5. PartnerDashboard new tab (Partner side)
6. Cross-ecosystem analytics components
7. Admin unified dashboard updates

